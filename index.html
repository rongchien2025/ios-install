<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>C√†i ƒê·∫∑t App G·ªçi R·ªìng Online</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f5f7; min-height: 100vh; padding: 0; }
.container { max-width: 980px; margin: 0 auto; padding: 0 20px; background: white; }
/* Header gi·ªëng App Store */
.app-header { background: white; padding: 20px 0; border-bottom: 1px solid #e5e5e7; }
.app-header-content { display: flex; align-items: flex-start; gap: 20px; padding: 0 20px; }
.app-icon { width: 120px; height: 120px; border-radius: 26px; background: #f5f5f7; display: flex; align-items: center; justify-content: center; overflow: hidden; flex-shrink: 0; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
.app-icon img { width: 100%; height: 100%; object-fit: contain; }
.app-info { flex: 1; display: flex; flex-direction: column; gap: 8px; }
.app-title { font-size: 34px; font-weight: 700; color: #1d1d1f; line-height: 1.2; }
.app-subtitle { font-size: 21px; color: #86868b; font-weight: 400; }
.install-section { display: flex; align-items: center; gap: 12px; margin-top: 12px; }
.install-btn { display: inline-block; padding: 10px 20px; background: #007AFF; color: white; text-decoration: none; border-radius: 20px; font-size: 17px; font-weight: 600; transition: all 0.2s; min-width: 100px; text-align: center; }
.install-btn:hover { background: #0051D5; }
.in-app-purchase { font-size: 13px; color: #86868b; }
.share-btn { margin-left: auto; width: 44px; height: 44px; border-radius: 50%; background: transparent; border: none; display: flex; align-items: center; justify-content: center; cursor: pointer; color: #007AFF; font-size: 20px; }
.share-btn:hover { background: #f5f5f7; }
.app-stats { display: grid; grid-template-columns: repeat(4, 1fr); background: #f5f5f7; border-radius: 12px; overflow: hidden; }
.stat-item { position: relative; text-align: center; padding: 12px 8px; }
/* G·∫°ch vu√¥ng d·ªçc ph√¢n c√°ch */
.stat-item:not(:last-child)::after { content: ""; position: absolute; right: 0; top: 50%; width: 2px; height: 40%; background: #d1d1d6; transform: translateY(-50%); border-radius: 2px; }
/* Label & Value style */
.stat-label { font-size: 13px; color: #86868b; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; }
.stat-value { font-size: 21px; color: #1d1d1f; font-weight: 600; }
.stat-subvalue { font-size: 13px; color: #86868b; margin-top: 2px; }
.rating-stars { display: flex; gap: 2px; align-items: center; margin-top: 4px; }
.star { color: #ff9500; font-size: 14px; }
/* Screenshots */
.screenshots-section { padding: 0 20px; border-bottom: 1px solid #e5e5e7; }
.screenshot-main { position: relative; margin-bottom: 15px; }
.screenshot-frame { border-radius: 20px; overflow: hidden; background: #000; position: relative; box-shadow: 0 8px 24px rgba(0,0,0,0.15); }
.screenshot-frame img { width: 100%; height: auto; display: block; }
.screenshot-nav { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; width: 44px; height: 44px; border-radius: 50%; cursor: pointer; font-size: 20px; display: flex; align-items: center; justify-content: center; transition: all 0.2s; z-index: 10; }
.screenshot-nav:hover { background: rgba(0,0,0,0.7); }
.screenshot-nav.prev { left: 10px; }
.screenshot-nav.next { right: 10px; }
.screenshot-nav.hidden { display: none; }
/* M√¥ t·∫£ */
.description-section { padding: 0 20px; border-bottom: 1px solid #e5e5e7; }
.description-text { font-size: 17px; line-height: 1.5; color: #1d1d1f; white-space: pre-wrap; }
.read-more { color: #007AFF; cursor: pointer; text-decoration: none; }
.read-more:hover { text-decoration: underline; }
/* Nh√† ph√°t tri·ªÉn */
.developer-section { padding: 20px; border-bottom: 1px solid #e5e5e7; }
.developer-link { display: flex; align-items: center; justify-content: space-between; text-decoration: none; color: #007AFF; font-size: 17px; font-weight: 600; }
.developer-link:hover { text-decoration: underline; }
.developer-label { color: #86868b; font-size: 13px; margin-top: 4px; }
/* H∆∞·ªõng d·∫´n c√†i ƒë·∫∑t */
.instructions-section { padding: 10px; background: #c3c3c5; border-radius: 5px; margin-bottom: 10px; }
.instructions-title { font-size: 22px; font-weight: 700; margin-bottom: 20px; color: #1d1d1f; }
.instructions-list { list-style: none; counter-reset: step-counter; }
.instructions-list li { counter-increment: step-counter; margin-bottom: 15px; padding-left: 40px; position: relative; font-size: 16px; line-height: 1.6; color: #1d1d1f; }
.instructions-list li::before { content: counter(step-counter); position: absolute; left: 0; top: 0; width: 28px; height: 28px; background: #007AFF; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 14px; }
.loading { text-align: center; padding: 40px; color: #86868b; font-size: 16px; }
@media (max-width: 768px) {
.app-stats { grid-template-columns: repeat(4, 1fr); }
.app-title { font-size: 28px; }
.app-subtitle { font-size: 18px; }
}
footer { background: #1d1d1f; color: white; text-align: center; padding: 1rem; }
</style>
</head>
<body>
<div class="container">
  <!-- Header gi·ªëng App Store -->
  <div class="app-header">
    <div class="app-header-content">
      <div class="app-icon" id="appIcon">üì±</div>
      <div class="app-info">
        <div class="app-title" id="appName">ƒêang t·∫£i...</div>
        <div class="install-section">
          <a href="#" id="installBtn" class="install-btn" style="display: none;"> C√†i ƒê·∫∑t </a>
          <span class="in-app-purchase" id="inAppPurchase" style="display: none;">Mua Trong ·ª®ng D·ª•ng</span>
          <button class="share-btn" onclick="shareApp()" title="Chia s·∫ª">‚Üó</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Th√¥ng tin app - 4 c·ªôt -->
  <div class="app-stats" id="appStats" style="display: none;">
    <div class="stat-item" id="buildStat" style="display: none;">
      <div class="stat-label">Build</div>
      <div class="stat-value" id="buildValue"></div>
    </div>
    <div class="stat-item" id="ageStat" style="display: none;">
      <div class="stat-label">ƒê·ªô Tu·ªïi</div>
      <div class="stat-value" id="ageValue"></div>
    </div>
    <div class="stat-item" id="sizeStat" style="display: none;">
      <div class="stat-label">K√≠ch Th∆∞·ªõc</div>
      <div class="stat-value" id="sizeValue"></div>
    </div>
    <div class="stat-item" id="categoryStat" style="display: none;">
      <div class="stat-label">Th·ªÉ Lo·∫°i</div>
      <div class="stat-value" id="categoryValue"></div>
    </div>
  </div>
  <!-- H∆∞·ªõng d·∫´n c√†i ƒë·∫∑t -->
  <div class="instructions-section">
    <div class="instructions-title">H∆∞·ªõng D·∫´n C√†i ƒê·∫∑t</div>
    <ol class="instructions-list">
      <li>ƒê·∫£m b·∫£o b·∫°n ƒëang s·ª≠ d·ª•ng thi·∫øt b·ªã iOS (iPhone/iPad)</li>
      <li>Nh·∫•n n√∫t "C√†i ƒê·∫∑t" ·ªü tr√™n</li>
      <li>Cho ph√©p c√†i ƒë·∫∑t khi ƒë∆∞·ª£c h·ªèi</li>
      <li>V√†o <strong>C√†i ƒê·∫∑t ‚Üí C√†i ƒê·∫∑t Chung ‚Üí Qu·∫£n L√Ω VPN & Thi·∫øt B·ªã</strong></li>
      <li>Ch·ªçn ch·ª©ng ch·ªâ nh√† ph√°t tri·ªÉn</li>
      <li>Nh·∫•n <strong>"Tin C·∫≠y"</strong></li>
      <li>Quay v·ªÅ m√†n h√¨nh ch√≠nh v√† m·ªü ·ª©ng d·ª•ng</li>
    </ol>
  </div>
  <!-- Screenshots -->
  <div class="screenshots-section" id="screenshotsSection" style="display: none;">
    <div class="screenshot-main">
      <button class="screenshot-nav prev" id="prevScreenshot" onclick="changeScreenshot(-1)">‚Äπ</button>
      <div class="screenshot-frame">
        <img id="mainScreenshot" src="" alt="·∫¢nh Ch·ª•p M√†n H√¨nh">
      </div>
      <button class="screenshot-nav next" id="nextScreenshot" onclick="changeScreenshot(1)">‚Ä∫</button>
    </div>
  </div>
  <!-- M√¥ t·∫£ -->
  <div class="description-section" id="descriptionSection" style="display: none;">
    <div style="font-size: 22px; font-weight: 600; margin-bottom: 15px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
      <span>M√¥ T·∫£</span>
    </div>
    <div class="description-text" id="descriptionText"></div>
  </div>
  <!-- Phi√™n b·∫£n c≈© -->
  <div class="old-versions-section" id="oldVersionsSection" style="display: none;">
    <div class="section-title" style="font-size: 22px; font-weight: 600; border-bottom: 1px solid #e5e5e7; margin-bottom: 15px; padding: 20px 20px 0; cursor: pointer; display: flex; justify-content: space-between; align-items: center;" onclick="toggleOldVersions()">
      <span>Phi√™n B·∫£n C≈©</span>
      <span id="oldVersionsArrow" style="font-size: 24px; transition: transform 0.3s;">‚ñº</span>
    </div>
    <div id="oldVersionsList" style="padding: 0 20px; max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out;"></div>
  </div>
  <!-- Nh√† ph√°t tri·ªÉn -->
  <div class="developer-section" id="developerSection" style="display: none;">
    <a class="developer-link" id="developerLink">
      <span>
        <div id="developerName">Nh√† Ph√°t Tri·ªÉn</div>
      </span>
      <span>‚Ä∫</span>
    </a>
    <div class="developer-label">Nh√† Ph√°t Tri·ªÉn</div>
  </div>
  <footer>
    <p>&copy; 2025 <b><a href="/">IPA Signer</a></b>. B·∫£o l∆∞u m·ªçi quy·ªÅn.</p>
  </footer>
</div>
<script>
// C√°c ph·∫ßn script gi·ªØ nguy√™n logic, ch·ªâ s·ª≠a m·ªôt s·ªë text hi·ªÉn th·ªã tƒ©nh n·∫øu c·∫ßn
// V√≠ d·ª•: alert trong shareApp
function shareApp() {
  if (navigator.share) {
    navigator.share({
      title: document.getElementById('appName').textContent,
      text: 'C√†i ƒë·∫∑t ·ª©ng d·ª•ng n√†y',
      url: window.location.href
    });
  } else {
    navigator.clipboard.writeText(window.location.href).then(() => {
      alert('ƒê√£ sao ch√©p li√™n k·∫øt!');
    });
  }
}
        
        function setupInstallButton(ipaUrl) {
            const installBtn = document.getElementById('installBtn');
            let baseUrl = window.location.origin + window.location.pathname.replace(/\/[^/]*$/, '');
            
            // QUAN TR·ªåNG: iOS y√™u c·∫ßu HTTPS cho OTA installation
            // Force HTTPS n·∫øu kh√¥ng ph·∫£i localhost
            const isLocalhost = window.location.hostname === 'localhost' || 
                               window.location.hostname === '127.0.0.1' ||
                               /^192\.168\./.test(window.location.hostname) ||
                               /^10\./.test(window.location.hostname) ||
                               /^172\.(1[6-9]|2[0-9]|3[0-1])\./.test(window.location.hostname);
            
            if (!isLocalhost && baseUrl.startsWith('http://')) {
                baseUrl = baseUrl.replace('http://', 'https://');
                console.warn('WARNING: iOS requires HTTPS for OTA installation. Converting to HTTPS:', baseUrl);
            }
            
            let fullIpaUrl = ipaUrl;
            if (!ipaUrl.startsWith('http://') && !ipaUrl.startsWith('https://')) {
                fullIpaUrl = baseUrl + '/' + ltrim(ipaUrl, '/');
            }
            
            // Force HTTPS cho IPA URL (iOS y√™u c·∫ßu)
            if (!isLocalhost && fullIpaUrl.startsWith('http://')) {
                fullIpaUrl = fullIpaUrl.replace('http://', 'https://');
                console.warn('WARNING: Converting IPA URL to HTTPS:', fullIpaUrl);
            }
            
            const manifestUrl = baseUrl + '/create_manifest.php?ipa=' + encodeURIComponent(fullIpaUrl);
            installBtn.href = 'itms-services://?action=download-manifest&url=' + encodeURIComponent(manifestUrl);
            installBtn.style.display = 'inline-block';
            
            // Track install khi click n√∫t c√†i ƒë·∫∑t
            installBtn.onclick = function() {
                trackInstall();
            };
        }
        
        function ltrim(str, chars) {
            return str.replace(new RegExp('^[' + chars + ']+', 'g'), '');
        }
        
        // Load app info khi trang load
        loadAppInfo();
    </script>
</body>
</html>
